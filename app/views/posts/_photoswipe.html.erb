<div class="popup" data-behavior="popup">
  <header>
    <div class="space"></div>
    <div class="title"><div data-behavior="popup_title"><%= @post.title %></div></div>
    <%= link_to image_tag("close_x.svg", class: "close_x"), "#close_x", data: { behavior: "close_x" }, class: "close_link" %>
  </header>
  <div class="popup_content container_outer" data-behavior="popup_content"></div>
</div>
<div data-behavior="comment_content" style="display: none;">
  <%= render "layouts/comments" %>
</div>

<div data-behavior="swipe" data-index="<%= @post.publish_order %>" class="swipe">
  <ul>
    <% @posts.each do |post| %>
        <% data = { path: post_path(post), title: post.title } %>
        <% if @post.id == post.id; data.merge(loaded: true) end %>

        <%= content_tag :li, data: data do %>
            <% if @post.id == post.id %>
                <%= render "photoswipe_content" %>
            <% else %>
                <div class="center_container">
                  <%= render "layouts/spinner" %>
                </div>
            <% end %>
        <% end %>
    <% end %>
  </ul>
</div>