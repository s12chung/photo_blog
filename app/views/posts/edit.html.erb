<% set_title "Edit #{@post.title}" %>

<div class="preview">
  <%= image_tag @post.photo.crop_preview, data: { behavior: "crop_preview" } %>
</div>

<div class="container_outer">
  <section class="main">
    <%= form_for @post, html: { class: "left", data: { behavior: "crop_form" }} do |f| %>
        <% Post.crop_attributes.each do |attribute| %>
            <%= f.hidden_field attribute %>
        <% end %>
        <p>
          <%= f.label :title %><br />
          <%= f.text_field :title %>
        </p>
        <p>
          <%= f.label :date %>
          <%= f.date_select :date %>
        </p>
        <p>
          <%= f.label :place %><br />
          <%= f.text_field :place %>
        </p>
        <p>
          <%= f.label :address %><br />
          <%= f.text_field :address %>
        </p>
        <p>
          <%= f.label :markdown %><br />
          <%= f.text_area :markdown, class: "markdown" %>
        </p>

        <p>
          <%= f.label :footnote_text %><br />
          <%= f.text_area :footnote_text, class: "footnote" %>
        </p>
        <%= submit_tag "Update" %>
    <% end %>

    <div class="right">
      <%= image_tag @post.photo.to_crop, data: { behavior: "crop" } %>

      <%= link_to "Preview", post_path(@post), class: "preview_link" %>
      <%= link_to @post.published ? "Unpublish" : "Publish", toggle_publish_post_path(@post), method: :patch %>
    </div>
  </section>
</div>